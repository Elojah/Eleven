<!DOCTYPE html>
<html>
<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- CSS -->
<link href='css/fiche.css' rel='stylesheet' type='text/css'>
<link rel="stylesheet" type="text/css" href="css/jquery-comments.css">
<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
<link rel="stylesheet" type="text/css" href="css/multi-screen-css.css">
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

</head>

<!-- DOM -->
<body>
	<div id="screen1" class="ms-container ms-default">
		<h1 id="load0" class="load0" data-content="Et&nbsp;si&nbsp;c'&eacute;tait&nbsp;vous&nbsp;?">Et&nbsp;si&nbsp;c'&eacute;tait&nbsp;vous&nbsp;?</h1>
	</div>
	<div id="screen2" class="ms-container">
		<div id="timeline" class="timeline"></div>
		<div id="container-comments-container" class="comment">
			<div id="comments-container"></div>
		</div>
	</div>
</body>

<!-- Timeline -->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<!-- Data -->
<script type="text/javascript" src="data/comment-data.js"></script>
<!-- Comment -->
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/multi-screen.min.js"></script>
<script type="text/javascript">$(document).ready(function() { MultiScreen.init(); });</script>
<script type="text/javascript" src="js/jquery-comments.js"></script>

<!-- Timeline -->
<script type="text/javascript">
	google.charts.load("current", {packages:["timeline"]});
	google.charts.setOnLoadCallback(drawChart);
	function drawChart() {
		var container = document.getElementById('timeline');
		var chart = new google.visualization.Timeline(container);
		var dataTable = new google.visualization.DataTable();

		dataTable.addColumn({ type: 'string', id: 'Role' });
		dataTable.addColumn({ type: 'string', id: 'Name' });
		dataTable.addColumn({ type: 'date', id: 'Start' });
		dataTable.addColumn({ type: 'date', id: 'End' });
		dataTable.addRows([
			[ 'Formation', 'ESSEC', new Date(2016, 7, 1), new Date(2018, 4, 30) ],
			[ 'Formation', "Recherche d'emploi", new Date(2018, 4, 30), new Date(2018, 8, 30) ],
			[ 'Formation', "Emplois trouves", new Date(2018, 9, 30), new Date(2018, 10, 30) ]
			]);

		var options = {
			timeline: {
				groupByRowLabel: true,
				rowLabelStyle: {fontName: 'Helvetica', fontSize: 16, color: '#a4a4a4' },
				barLabelStyle: {fontName: 'Garamond', fontSize: 14}
			},
			backgroundColor: '#4f4f4f'
		};

		chart.draw(dataTable, options);
	}
</script>

<script type="text/javascript">
	$(function() {
		$('#comments-container').comments({
			profilePictureURL: 'https://viima-app.s3.amazonaws.com/media/user_profiles/user-icon.png',
			roundProfilePictures: true,
			textareaRows: 1,
			enableAttachments: true,
			forceResponsive: true,
			getComments: function(success, error) {
				setTimeout(function() {
					success(commentsArray);
				}, 500);
			},
			postComment: function(data, success, error) {
				setTimeout(function() {
					success(data);
				}, 500);
			},
			putComment: function(data, success, error) {
				setTimeout(function() {
					success(data);
				}, 500);
			},
			deleteComment: function(data, success, error) {
				setTimeout(function() {
					success();
				}, 500);
			},
			upvoteComment: function(data, success, error) {
				setTimeout(function() {
					success(data);
				}, 500);
			},
			uploadAttachments: function(dataArray, success, error) {
				setTimeout(function() {
					success(dataArray);
				}, 500);
			},
		});
	});
</script>

<script type="text/javascript">

	function whichAnimationEvent(){
	  var t,
	      el = document.createElement("fakeelement");
	  var animations = {
	  	"animation"      : "animationend",
	  	"OAnimation"     : "oAnimationEnd",
	  	"MozAnimation"   : "animationend",
	  	"WebkitAnimation": "webkitAnimationEnd"
	  }
	  for (t in animations){
	    if (el.style[t] !== undefined){
	      return animations[t];
	    }
	  }
	}
	var animationEvent = whichAnimationEvent();

	var load0 = document.getElementById('load0');
	load0.addEventListener(animationEvent, function (event) {
		console.log("Animation ended")
		MultiScreen.switch_screens({target_id: 'screen2', 'animation_command': "bottom"});
	}
	);

</script>

</html>

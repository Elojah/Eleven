<!DOCTYPE html>
<html>
<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- CSS -->
<link href='css/fiche.css' rel='stylesheet' type='text/css'>
<link rel="stylesheet" type="text/css" href="css/jquery-comments.css">
<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
<link rel="stylesheet" type="text/css" href="css/multi-screen-css.css">
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

</head>

<!-- DOM -->
<body>
	<div id="screen1" class="ms-container">
		<h1 id="load0" class="load0" data-content="Et&nbsp;si&nbsp;c'&eacute;tait&nbsp;vous&nbsp;?">Et&nbsp;si&nbsp;c'&eacute;tait&nbsp;vous&nbsp;?</h1>
	</div>
	<div id="screen2" class="ms-container">
		<img id="img2" src="img/critere.png" class="ms-nav-link" data-ms-target="screen3" data-ms-animation="right" onclick="$('#img3').photoResize()"></img>
	</div>
	<div id="screen3" class="ms-container">
		<img id="img3" src="img/formation.png" class="ms-nav-link" data-ms-target="screen4" data-ms-animation="fadeleft"></img>
	</div>
	<div id="screen4" class="ms-container ms-default">
		<canvas id="myChart" width="400" height="400"></canvas>
		<div id="container-comments-container" class="comment">
			<div id="comments-container"></div>
		</div>
	</div>
</body>

<!-- Timeline -->
<script type="text/javascript" src="js/Chart.min.js"></script>
<!-- Data -->
<script type="text/javascript" src="data/comment-data.js"></script>
<!-- Comment -->
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/multi-screen.min.js"></script>
<script type="text/javascript">
var myLineChart;
$(document).ready(function() { MultiScreen.init(); });
</script>
<script type="text/javascript" src="js/jquery-comments.js"></script>

<script type="text/javascript">
(function ($) {
	$.fn.photoResize = function (options) {

		var element	= $(this),
			defaults = {
	            bottomSpacing: 10
			};

		$(element).load(function () {
			updatePhotoHeight();

			$(window).bind('resize', function () {
				updatePhotoHeight();
			});
		});

		options = $.extend(defaults, options);

		function updatePhotoHeight() {
			var o = options,
				photoHeight = $(window).height();

			$(element).attr('height', photoHeight - o.bottomSpacing);
		}
		updatePhotoHeight();
	};

}(jQuery));
</script>

<script type="text/javascript">
	$(function() {
		$('#comments-container').comments({
			profilePictureURL: 'https://viima-app.s3.amazonaws.com/media/user_profiles/user-icon.png',
			roundProfilePictures: true,
			textareaRows: 1,
			enableAttachments: true,
			forceResponsive: true,
			getComments: function(success, error) {
				setTimeout(function() {
					success(commentsArray);
				}, 500);
			},
			postComment: function(data, success, error) {
				setTimeout(function() {
					success(data);
				}, 500);
			},
			putComment: function(data, success, error) {
				setTimeout(function() {
					success(data);
				}, 500);
			},
			deleteComment: function(data, success, error) {
				setTimeout(function() {
					success();
				}, 500);
			},
			upvoteComment: function(data, success, error) {
				setTimeout(function() {
					success(data);
				}, 500);
			},
			uploadAttachments: function(dataArray, success, error) {
				setTimeout(function() {
					success(dataArray);
				}, 500);
			},
		});
	});
</script>

<script type="text/javascript">

	function whichAnimationEvent(){
	  var t,
	      el = document.createElement("fakeelement");
	  var animations = {
	  	"animation"      : "animationend",
	  	"OAnimation"     : "oAnimationEnd",
	  	"MozAnimation"   : "animationend",
	  	"WebkitAnimation": "webkitAnimationEnd"
	  }
	  for (t in animations){
	    if (el.style[t] !== undefined){
	      return animations[t];
	    }
	  }
	}
	var animationEvent = whichAnimationEvent();

	var load0 = document.getElementById('load0');
	load0.addEventListener(animationEvent, function (event) {
		console.log("Animation ended")
		$('#img2').photoResize();
		MultiScreen.switch_screens({target_id: 'screen2', 'animation_command': "bottom"});
	}
	);
</script>

<script type="text/javascript">
	// Get context with jQuery - using jQuery's .get() method.
	var ctx = $("#myChart").get(0).getContext("2d");
	var myNewChart = new Chart(ctx);

	Chart.defaults.global.responsive = true;
	Chart.defaults.global.maintainAspectRatio = true;

	ctx.canvas.width = ctx.canvas.originalwidth;
	ctx.canvas.height = ctx.canvas.originalheight;

	var data = {
	    labels: ["January", "February", "March", "April", "May", "June", "July"],
	    datasets: [
	        {
	            label: "My First dataset",
	            fillColor: "rgba(220,220,220,0.2)",
	            strokeColor: "rgba(220,220,220,1)",
	            pointColor: "rgba(220,220,220,1)",
	            pointStrokeColor: "#fff",
	            pointHighlightFill: "#fff",
	            pointHighlightStroke: "rgba(220,220,220,1)",
	            data: [65, 59, 80, 81, 56, 55, 40]
	        },
	        {
	            label: "My Second dataset",
	            fillColor: "rgba(151,187,205,0.2)",
	            strokeColor: "rgba(151,187,205,1)",
	            pointColor: "rgba(151,187,205,1)",
	            pointStrokeColor: "#fff",
	            pointHighlightFill: "#fff",
	            pointHighlightStroke: "rgba(151,187,205,1)",
	            data: [28, 48, 40, 19, 86, 27, 90]
	        }
	    ]
	};

	var options = {
	///Boolean - Whether grid lines are shown across the chart
    scaleShowGridLines : false,
	//String - Colour of the grid lines
    scaleGridLineColor : "rgba(0,0,0,.05)",
	//Number - Width of the grid lines
    scaleGridLineWidth : 0,
	//Boolean - Whether to show horizontal lines (except X axis)
    scaleShowHorizontalLines: false,
	//Boolean - Whether to show vertical lines (except Y axis)
    scaleShowVerticalLines: false,
	//Boolean - Whether the line is curved between points
    bezierCurve : true,
	//Number - Tension of the bezier curve between points
    bezierCurveTension : 0.4,
	//Boolean - Whether to show a dot for each point
    pointDot : true,
	//Number - Radius of each point dot in pixels
    pointDotRadius : 4,
	//Number - Pixel width of point dot stroke
    pointDotStrokeWidth : 1,
	//Number - amount extra to add to the radius to cater for hit detection outside the drawn point
    pointHitDetectionRadius : 20,
	//Boolean - Whether to show a stroke for datasets
    datasetStroke : true,
	//Number - Pixel width of dataset stroke
    datasetStrokeWidth : 2,
	//Boolean - Whether to fill the dataset with a colour
    datasetFill : true,
	//String - A legend template
    legendTemplate : "<ul class=\"<%=name.toLowerCase()%>-legend\"><% for (var i=0; i<datasets.length; i++){%><li><span style=\"background-color:<%=datasets[i].strokeColor%>\"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>"
};

	myLineChart = new Chart(ctx).Line(data, options);
</script>

</html>
